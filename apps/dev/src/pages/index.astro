---
import IntroSection from "../components/IntroSection";
import { getUser } from "@astro-auth/core";
import UserStore from "../components/UserStore";

const user = getUser(Astro);

const error = new URL(Astro.request.url).searchParams.get("error");
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Astro</title>
  </head>

  <body>

    <div>
      {error && <div>{error}</div>}
    </div>

    <UserStore user={user as any} client:load />
    <IntroSection client:load {user} />
  </body>
</html>
